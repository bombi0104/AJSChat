<div class="container-fluid no-pading">
	<div class="left-panel pull-left">
		<div class="header-panel">
            <input type=text ng-model="searchGr.name" style="border: none; border-color: transparent; background-color: transparent;">
		</div>  
		<div class="contact-panel">
			<div class="list-group">
  				<a class="list-group-item" ng-repeat="gr in groups | filter:searchGr" ng-click="selectGroup(gr)" ng-class="{'active':gr.active}">
              		<span class="badge" ng-hide="gr.unread == 0">{{gr.unread}}</span>
              		<span class="glyphicon glyphicon-th-large" ng-hide="gr.email"></span>
                    <span class="glyphicon glyphicon-user" ng-hide="!gr.email"></span>
              		{{gr.name}}
              	</a>
			</div>
		</div>
	</div>
	<div class="right-panel pull-right">
		<div class="header-panel">
			<div class="pull-left group-name"><b>{{group.name}}</b></div>
			<div class="pull-right">
				{{user.name}}
				<br />
				<div >
					<span class="glyphicon glyphicon-user" 
						ng-repeat="user in group.users" 
						tooltip-placement="bottom"
						tooltip="{{user.name}}">ã€€</span>
					<button type="button" class="btn btn-info btn-sm" ng-click="addUserToGroup();"><span class="glyphicon glyphicon-plus"></span></button>
                    <!-- Dropdown menu button -->
                    <div class="btn-group" dropdown is-open="status.isopen">
                      <button type="button" class="btn btn-info btn-sm dropdown-toggle" dropdown-toggle ng-disabled="disabled"><span class="glyphicon glyphicon-cog"></span></span>
                      </button>
                      <ul class="dropdown-menu dropdown-menu-right" role="menu">
                        <li><a ng-click="openCreateGroupDialog();">Create Group</a></li>
                        <li class="divider"></li>
                        <li><a ng-click="reload();"><span class="glyphicon glyphicon-home"></span>   Reload</a></li>
                        <li><a ng-click="signout()"><span class="glyphicon glyphicon-log-out"></span>   Sign Out</a></li>
                      </ul>
                    </div>
				</div>

			</div>
		</div>
		<div class="message-panel" scroll-glue>
			<ul class="list-group">
				<!-- <li><button type="button" class="btn btn-info btn-sm" ng-click="loadMore();"><span class="glyphicon glyphicon-cloud-download"></span>Load more...</button></ -->
            	<li class="list-group-item" ng-repeat="msg in group.messages" ng-click="onMessageClick($index);">
	              	<div class='pull-left nickname'>{{msg.from_user.name}}</div>
	              	<div class='pull-right msg-time'>{{formatDate(msg.updated_at)}}</div>
	              	<br />
                    <pre ng-bind-html="msg.content | emoji"></pre>
            	</li>
          	</ul>
			<!-- <pre ng-repeat="msg in group.messages">{{msg.content}}</pre> -->
		</div>
		<div class="chat-panel">
            <button type="button" class="btn btn-default btn-sm" popover-template="selectUserPopover.templateUrl" popover-title="{{selectUserPopover.title}}" popover-trigger="focus"><span class="glyphicon glyphicon-share-alt"></span><span class="glyphicon glyphicon-user"></span></button>

            <button type="button" class="btn btn-default btn-sm" popover-template="EmojiPopover.templateUrl" popover-trigger="focus"><span class="glyphicon glyphicon-heart"></span></button>

			<textarea class="chat-area" ng-model="inputMsg" ng-keyup="sendMsg($event);" placeholder="Enter your message here...(Shift-Enter for send)"></textarea>
		</div>
	</div>
</div>

<!-- Select to user popoverTemplate -->
<script type="text/ng-template" id="SelectToUserTemplate.html">
<div class="popoverSelectUser">
    <ul class="nav nav-pills nav-stacked">
        <li ng-repeat="user in group.users" ng-click="selectToUser(user);"><a>{{user.name}}</a></li>
    </ul>
</div>
</script>

<!-- Select to user popoverTemplate -->
<script type="text/ng-template" id="EmojiTemplate.html">
<div class="Emoji-popover">
    <span ng-repeat="icon in EmojiPopover.emoji"><span ng-click="insertEmoji($index);" ng-bind-html="icon | emoji"></span></span>
</div>
</script>

<!-- Add user to group modal -->
<script type="text/ng-template" id="addUserToGroup.html">
    <div class="modal-header">
        <h3 class="modal-title">Users</h3>
    </div>
    <div class="modal-body">
    	<div class="container-fluid">
    		<div class="row">
    			<div class="col-sm-6">
    				<h2>Users list</h2>
    				<ul class="list-group">
            			<li class="list-group-item" ng-repeat="user in users">
            				<span class="glyphicon glyphicon-plus" ng-click="addUser(user);"></span>
	              			{{user.name}} ({{user.email}})
            			</li>
          			</ul>
    			</div>
    			<div class="col-sm-6">
    				<h2>Groups Users</h2>
					<ul class="list-group">
        				<li class="list-group-item" ng-repeat="user in group.users">
        					<span class="glyphicon glyphicon-minus" ng-click="removeUser(user);"></span>
              				{{user.name}} ({{user.email}})
        				</li>
      				</ul>
    			</div>
    		</div>
    	</div>   
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="close()">Close</button>
    </div>
</script>

<script type="text/ng-template" id="LoginTemplete.html">
    <div class="modal-header">
        <h3 class="modal-title">Login</h3>
    </div>
    <div class="modal-body">
		<input type="text" ng-model="login_email" class="form-control" placeholder="Enter email">
		<br />
		<input type="password" ng-model="login_pass" class="form-control" placeholder="Enter password" ng-keyup="$event.keyCode == 13 ? ok() : null;">
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">Login</button>
        <button class="btn btn-primary" ng-click="signup()">Sign Up</button>
<!--         <button class="btn btn-warning" ng-click="cancel()">Cancel</button> -->
        
    </div>
</script>

<script type="text/ng-template" id="SignUpTemplete.html">
    <div class="modal-header">
        <h2 class="modal-title">Sign up</h2>
    </div>
    <div class="modal-body">
	    <input type="text" ng-model="email" class="form-control" placeholder="Enter email"> <br />
		<input type="text" ng-model="name" class="form-control" placeholder="Enter name"> <br />
		<input type="password" ng-model="password" class="form-control" placeholder="Enter password" ng-keyup="$event.keyCode == 13 ? ok() : null;">
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">Sign Up</button>
<!--         <button class="btn btn-warning" ng-click="cancel()">Cancel</button> -->
    </div>
</script>

<script type="text/ng-template" id="CreateGroupTemplete.html">
    <div class="modal-header">
        <h2 class="modal-title">Create Group</h2>
    </div>
    <div class="modal-body">
		<input type="text" ng-model="name" class="form-control" placeholder="Enter name"> <br />
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">Create</button>
		<button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>